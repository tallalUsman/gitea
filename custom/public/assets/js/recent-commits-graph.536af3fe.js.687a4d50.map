{"version":3,"file":"js/recent-commits-graph.xxxxxxxx.js","mappings":";;;;;;;;;;;;;;;;;;AACsB;AAOf;AACW;AACA;AAKX;AACqB;AACR;AACb;AAEP,MAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,2CAAK,CAAC,SAAS,QAAQ,0DAAa,CAAC;AACrC,2CAAK,CAAC,SAAS,cAAc,0DAAa,CAAC;AAE3C,2CAAK,CAAC;AAAA,EACJ,+CAAS;AAAT,EACA,iDAAW;AAAX,EACA,gDAAU;AAAV,EACA,6CAAO;AACT;AAEA,+DAAe;AAAA,EACb,YAAY,EAAC,GAAG,gDAAE,OAAO;AAAA,EACzB,OAAO;AAAA,IACL,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EACA,MAAM,OAAO;AAAA,IACX,WAAW;AAAA,IACX,WAAW;AAAA,IACX,UAAU,SAAS,YAAY,CAAC;AAAA,IAChC,MAAM,CAAC;AAAA,EACT;AAAA,EACA,UAAU;AACR,SAAK,eAAe;AAAA,EACtB;AAAA,EACA,SAAS;AAAA,IACP,MAAM,iBAAiB;AACrB,WAAK,YAAY;AACjB,UAAI;AACF,YAAI;AACJ,WAAG;AACD,qBAAW,MAAM,sDAAG,CAAC,GAAG,KAAK,QAAQ,+BAA+B;AACpE,cAAI,SAAS,WAAW,KAAK;AAC3B,kBAAM,gDAAK,CAAC,GAAI;AAAA,UAClB;AAAA,QACF,SAAS,SAAS,WAAW;AAC7B,YAAI,SAAS,IAAI;AACf,gBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,gBAAM,QAAQ,OAAO,OAAO,IAAI,EAAE,CAAC,EAAE;AACrC,gBAAM,MAAM,uEAAuB,CAAC,oBAAI,KAAK,CAAC;AAC9C,gBAAM,YAAY,gEAAgB,CAAC,IAAI,KAAK,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC;AACjE,eAAK,OAAO,4EAA4B,CAAC,WAAW,IAAI,EAAE,MAAM,GAAG;AACnE,eAAK,YAAY;AAAA,QACnB,OAAO;AACL,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF,SAAS,KAAK;AACZ,aAAK,YAAY,IAAI;AAAA,MACvB,UAAE;AACA,aAAK,YAAY;AAAA,MACnB;AAAA,IACF;AAAA,IAEA,YAAY,MAAM;AAChB,aAAO;AAAA,QACL,UAAU;AAAA,UACR;AAAA,YACE,MAAM,KAAK,IAAI,CAAC,OAAO,EAAC,GAAG,EAAE,MAAM,GAAG,EAAE,QAAO,EAAE;AAAA,YACjD,OAAO;AAAA,YACP,iBAAiB,0DAAa,CAAC,SAAS;AAAA,YACxC,aAAa;AAAA,YACb,SAAS;AAAA,UACX;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,aAAa;AACX,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,qBAAqB;AAAA,QACrB,WAAW;AAAA,QACX,QAAQ;AAAA,UACN,GAAG;AAAA,YACD,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,SAAS;AAAA,YACX;AAAA,YACA,MAAM;AAAA,cACJ,SAAS;AAAA,YACX;AAAA,YACA,OAAO;AAAA,cACL,aAAa;AAAA,cACb,eAAe;AAAA,YACjB;AAAA,UACF;AAAA,UACA,GAAG;AAAA,YACD,OAAO;AAAA,cACL,eAAe;AAAA,YACjB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAC,EAAC;;;;;;;;;;;;;;;;AAvHia;AAEna,MAAM,eAAe,QAAM,gDAAY,CAAC,iBAAiB,GAAE,IAAE,EAAE,GAAE,+CAAW,CAAC,GAAE;AAC/E,MAAM,aAAa,EAAE,OAAO,uDAAuD;AACnF,MAAM,aAAa,EAAE,OAAO,gCAAgC;AAC5D,MAAM,aAAa;AAAA,EACjB,KAAK;AAAA,EACL,OAAO;AACT;AACA,MAAM,aAAa,EAAE,KAAK,EAAE;AAC5B,MAAM,aAAa;AAAA,EACjB,KAAK;AAAA,EACL,OAAO;AACT;AAEO,SAAS,OAAO,MAAM,QAAQ,QAAQ,QAAQ,OAAO,UAAU;AACpE,QAAM,qBAAqB,qDAAiB,CAAC,SAAS;AACtD,QAAM,iBAAiB,qDAAiB,CAAC,KAAK;AAE9C,SAAQ,8CAAU,CAAC,GAAG,uDAAmB,CAAC,OAAO,MAAM;AAAA,IACrD,uDAAmB;AAAnB,MAAoB;AAAA,MAAO;AAAA,MAAY,oDAAgB,CAAC,KAAK,YAAY,OAAO,OAAO,eAAe,KAAK,YAAY,OAAO,OAAO,qBAAoB,oCAAoC;AAAA,MAAG;AAAA;AAAA,IAAY;AAAA,IAC5M,uDAAmB,CAAC,OAAO,YAAY;AAAA,MACpC,KAAK,aAAa,KAAK,cAAc,MACjC,8CAAU,CAAC,GAAG,uDAAmB,CAAC,OAAO,YAAY;AAAA,QACnD,KAAK,aACD,8CAAU,CAAC,GAAG,uDAAmB,CAAC,OAAO,YAAY;AAAA,UACpD,gDAAY,CAAC,oBAAoB;AAAA,YAC/B,MAAM;AAAA,YACN,OAAO;AAAA,UACT,CAAC;AAAA,UACD,oDAAgB;AAAhB,YAAiB,MAAM,oDAAgB,CAAC,OAAO,OAAO,WAAW;AAAA,YAAG;AAAA;AAAA,UAAY;AAAA,QAClF,CAAC,MACA,8CAAU,CAAC,GAAG,uDAAmB,CAAC,OAAO,YAAY;AAAA,UACpD,gDAAY,CAAC,oBAAoB,EAAE,MAAM,wBAAwB,CAAC;AAAA,UAClE,oDAAgB;AAAhB,YAAiB,MAAM,oDAAgB,CAAC,KAAK,SAAS;AAAA,YAAG;AAAA;AAAA,UAAY;AAAA,QACvE,CAAC;AAAA,MACP,CAAC,KACD,uDAAmB,CAAC,QAAQ,IAAI;AAAA,MACnC,KAAK,KAAK,WAAW,IAClB,6CAAS,CAAC,KAAK,MAAM,OAAO,8CAAU,CAAC,GAAG,gDAAY,CAAC,gBAAgB;AAAA,QACrE,KAAK;AAAA,QACL,MAAM,SAAS,YAAY,KAAK,IAAI;AAAA,QACpC,SAAS,SAAS,WAAW;AAAA,MAC/B,GAAG,MAAM,GAAe,CAAC,QAAQ,SAAS,CAAC,IAAI,QAAQ,CAAC,IACxD,uDAAmB,CAAC,QAAQ,IAAI;AAAA,IACtC,CAAC;AAAA,EACH,CAAC;AACH;;;;;;;;;;;;AC/CA;;;;;;;;;;;;;;;;ACA0F;AACtB;AACL;;AAE/D,CAAwF;;AAEL;AACnF,iCAAiC,yFAAe,CAAC,sFAAM,aAAa,oGAAM;AAC1E;AACA,IAAI,KAAU,EAAE,EAYf;;;AAGD,+DAAe;;;;;;;;;;;;;;;ACxBoM","sources":["webpack:///./web_src/js/components/RepoRecentCommits.vue","webpack:///./web_src/js/components/RepoRecentCommits.vue?5ef8","webpack:///./web_src/js/components/RepoRecentCommits.vue?61f3","webpack:///./web_src/js/components/RepoRecentCommits.vue?f7fa","webpack:///./web_src/js/components/RepoRecentCommits.vue?e0d1","webpack:///./web_src/js/components/RepoRecentCommits.vue?b575"],"sourcesContent":["\nimport {SvgIcon} from '../svg.js';\nimport {\n  Chart,\n  Tooltip,\n  BarElement,\n  LinearScale,\n  TimeScale,\n} from 'chart.js';\nimport {GET} from '../modules/fetch.js';\nimport {Bar} from 'vue-chartjs';\nimport {\n  startDaysBetween,\n  firstStartDateAfterDate,\n  fillEmptyStartDaysWithZeroes,\n} from '../utils/time.js';\nimport {chartJsColors} from '../utils/color.js';\nimport {sleep} from '../utils.js';\nimport 'chartjs-adapter-dayjs-4/dist/chartjs-adapter-dayjs-4.esm';\n\nconst {pageData} = window.config;\n\nChart.defaults.color = chartJsColors.text;\nChart.defaults.borderColor = chartJsColors.border;\n\nChart.register(\n  TimeScale,\n  LinearScale,\n  BarElement,\n  Tooltip,\n);\n\nexport default {\n  components: {Bar, SvgIcon},\n  props: {\n    locale: {\n      type: Object,\n      required: true,\n    },\n  },\n  data: () => ({\n    isLoading: false,\n    errorText: '',\n    repoLink: pageData.repoLink || [],\n    data: [],\n  }),\n  mounted() {\n    this.fetchGraphData();\n  },\n  methods: {\n    async fetchGraphData() {\n      this.isLoading = true;\n      try {\n        let response;\n        do {\n          response = await GET(`${this.repoLink}/activity/recent-commits/data`);\n          if (response.status === 202) {\n            await sleep(1000); // wait for 1 second before retrying\n          }\n        } while (response.status === 202);\n        if (response.ok) {\n          const data = await response.json();\n          const start = Object.values(data)[0].week;\n          const end = firstStartDateAfterDate(new Date());\n          const startDays = startDaysBetween(new Date(start), new Date(end));\n          this.data = fillEmptyStartDaysWithZeroes(startDays, data).slice(-52);\n          this.errorText = '';\n        } else {\n          this.errorText = response.statusText;\n        }\n      } catch (err) {\n        this.errorText = err.message;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n\n    toGraphData(data) {\n      return {\n        datasets: [\n          {\n            data: data.map((i) => ({x: i.week, y: i.commits})),\n            label: 'Commits',\n            backgroundColor: chartJsColors['commits'],\n            borderWidth: 0,\n            tension: 0.3,\n          },\n        ],\n      };\n    },\n\n    getOptions() {\n      return {\n        responsive: true,\n        maintainAspectRatio: false,\n        animation: true,\n        scales: {\n          x: {\n            type: 'time',\n            grid: {\n              display: false,\n            },\n            time: {\n              minUnit: 'week',\n            },\n            ticks: {\n              maxRotation: 0,\n              maxTicksLimit: 52,\n            },\n          },\n          y: {\n            ticks: {\n              maxTicksLimit: 6,\n            },\n          },\n        },\n      };\n    },\n  },\n};\n","// extracted by mini-css-extract-plugin\nexport {};","import { render } from \"./RepoRecentCommits.vue?vue&type=template&id=9e1e8130&scoped=true\"\nimport script from \"./RepoRecentCommits.vue?vue&type=script&lang=js\"\nexport * from \"./RepoRecentCommits.vue?vue&type=script&lang=js\"\n\nimport \"./RepoRecentCommits.vue?vue&type=style&index=0&id=9e1e8130&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9e1e8130\"],['__file',\"web_src/js/components/RepoRecentCommits.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"9e1e8130\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('9e1e8130', __exports__)) {\n    api.reload('9e1e8130', __exports__)\n  }\n  \n  module.hot.accept(\"./RepoRecentCommits.vue?vue&type=template&id=9e1e8130&scoped=true\", () => {\n    api.rerender('9e1e8130', render)\n  })\n\n}\n\n\nexport default __exports__","export { default } from \"-!../../../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0]!./RepoRecentCommits.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0]!./RepoRecentCommits.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-1.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0]!./RepoRecentCommits.vue?vue&type=template&id=9e1e8130&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-2.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-2.use[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0]!./RepoRecentCommits.vue?vue&type=style&index=0&id=9e1e8130&scoped=true&lang=css\""],"names":[],"sourceRoot":""}